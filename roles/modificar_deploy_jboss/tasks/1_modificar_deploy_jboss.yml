---
- name: fecha y hora
  ansible.builtin.shell: date "+%Y%m%d%H%M%S"
  register: fechahora

- name: concatenar nombre de archivo DS con hora y fecha de sistema
  ansible.builtin.set_fact:
      nombre_ds_renombre: "{{ fechahora.stdout }}_{{ nombre_archivo_deploy }}_{{ fechahora.stdout }}"

- name: Respaldo de archivo DataSource de JBOSS
  ansible.builtin.shell: "mv {{ sdi_commons_deploy_basedir }}{{ nombre_archivo_deploy }} {{ sdi_commons_deploy_basedir }}{{ nombre_ds_renombre }}"

- name: crear archivo de deploy
  ansible.builtin.template:
    src: templates/deploy-xxxx.properties.j2
    dest: "{{ sdi_commons_deploy_basedir }}{{ nombre_archivo_deploy }}"

- name: crear archivo install-config.yaml
  ansible.builtin.template:
    src: templates/jboss.j2
    dest: "{{ SdiCommonsDeploy }}deploy.sh"